{% extends "network/layout.html" %}

{% block body %}
    {% if user.is_authenticated %}
        <!-- 
        -new post form here
            -Submit
                -on submit, post is added to database
                    -data displayed/ saved:
                        -username
                        -timestamp
                        -content
                        -likes (start at 0)
                -on submit, page is reloaded
                -on submit, new post is rendered at top of page
        -All posts renders here instead
        -
          -->
        <h2>New Post</h2>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <hr>
        <h2>All Posts</h2>
        {% for post in posts %}
            <div class="card mb-3">
                <div class="card-header">
                    <a href="{% url 'profile' post.user.username %}">{{ post.user.username }}</a> - {{ post.timestamp }}</div>
                <div class="card-body">
                    <p>{{ post.content }}</p>
                    <p>Likes: {{ post.likes }}</p>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>Log in to see posts</p>
    {% endif %}
{% endblock %}